<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/icons/favicon.png"><meta name="theme-color" content="#3eaf7c"><link rel="manifest" href="/manifest.webmanifest"><title>Chapter 3: Transport Layer | Computer Network Learning</title><meta name="description" content="关于 CWorld 学习该课程的一些笔记。">
    <link rel="preload" href="/assets/style-a57c0936.css" as="style"><link rel="stylesheet" href="/assets/style-a57c0936.css">
    <link rel="modulepreload" href="/assets/app-d9904927.js"><link rel="modulepreload" href="/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/assets/03-transport-layer.html-119fd813.js"><link rel="modulepreload" href="/assets/03-transport-layer.html-938bdb4f.js"><link rel="prefetch" href="/assets/01-introduction.html-3e2c5f17.js" as="script"><link rel="prefetch" href="/assets/02-application-layer.html-e8712866.js" as="script"><link rel="prefetch" href="/assets/index.html-10ff3865.js" as="script"><link rel="prefetch" href="/assets/intro.html-142a845d.js" as="script"><link rel="prefetch" href="/assets/01-网络基础知识及双绞线的制作.html-ff1d807c.js" as="script"><link rel="prefetch" href="/assets/02-交换机配置及VLAN建立.html-75052b65.js" as="script"><link rel="prefetch" href="/assets/03-三层交换及VLAN间路由.html-2eb008c9.js" as="script"><link rel="prefetch" href="/assets/04-路由器基本配置及静态路由配置.html-87585cbc.js" as="script"><link rel="prefetch" href="/assets/05-动态路由协议的配置.html-332abaad.js" as="script"><link rel="prefetch" href="/assets/06-访问控制列表及防火墙使用.html-d46a0d95.js" as="script"><link rel="prefetch" href="/assets/Getting Started.html-993467ff.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-16852858.js" as="script"><link rel="prefetch" href="/assets/02-application-layer.html-60a04521.js" as="script"><link rel="prefetch" href="/assets/index.html-b809455c.js" as="script"><link rel="prefetch" href="/assets/intro.html-5ec6dbed.js" as="script"><link rel="prefetch" href="/assets/01-网络基础知识及双绞线的制作.html-9d277d41.js" as="script"><link rel="prefetch" href="/assets/02-交换机配置及VLAN建立.html-f079078e.js" as="script"><link rel="prefetch" href="/assets/03-三层交换及VLAN间路由.html-2279f06f.js" as="script"><link rel="prefetch" href="/assets/04-路由器基本配置及静态路由配置.html-d03cf05a.js" as="script"><link rel="prefetch" href="/assets/05-动态路由协议的配置.html-287df770.js" as="script"><link rel="prefetch" href="/assets/06-访问控制列表及防火墙使用.html-1f9faa3b.js" as="script"><link rel="prefetch" href="/assets/Getting Started.html-2b01ca79.js" as="script"><link rel="prefetch" href="/assets/404.html-87d54bd8.js" as="script"><link rel="prefetch" href="/assets/index-70769223.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Computer Network Learning</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/intro.md" class="" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://blog.cworld.top" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/intro.md" class="" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://blog.cworld.top" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Tutorial <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/index.md" class="sidebar-item" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a><!----></li><li><a href="/intro.md" class="sidebar-item" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Main Chapters <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/01-introduction.html" class="sidebar-item" aria-label="Chapter 1: Introduction"><!--[--><!--]--> Chapter 1: Introduction <!--[--><!--]--></a><!----></li><li><a href="/02-application-layer.html" class="sidebar-item" aria-label="Chapter 2: Application Layer"><!--[--><!--]--> Chapter 2: Application Layer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/03-transport-layer.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Chapter 3: Transport Layer"><!--[--><!--]--> Chapter 3: Transport Layer <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/03-transport-layer.html#outline" class="router-link-active router-link-exact-active sidebar-item" aria-label="Outline"><!--[--><!--]--> Outline <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/03-transport-layer.html#transport-layer-services" class="router-link-active router-link-exact-active sidebar-item" aria-label="Transport-layer services"><!--[--><!--]--> Transport-layer services <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/03-transport-layer.html#multiplexing-and-demultiplexing" class="router-link-active router-link-exact-active sidebar-item" aria-label="Multiplexing and demultiplexing"><!--[--><!--]--> Multiplexing and demultiplexing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/03-transport-layer.html#connectionless-transport-udp" class="router-link-active router-link-exact-active sidebar-item" aria-label="Connectionless transport: UDP"><!--[--><!--]--> Connectionless transport: UDP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/03-transport-layer.html#principles-of-reliable-data-transfer" class="router-link-active router-link-exact-active sidebar-item" aria-label="Principles of reliable data transfer"><!--[--><!--]--> Principles of reliable data transfer <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Experiments <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/experiment/01-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E5%8F%8C%E7%BB%9E%E7%BA%BF%E7%9A%84%E5%88%B6%E4%BD%9C.html" class="sidebar-item" aria-label="1. 网络基础知识及双绞线的制作"><!--[--><!--]--> 1. 网络基础知识及双绞线的制作 <!--[--><!--]--></a><!----></li><li><a href="/experiment/02-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8F%8AVLAN%E5%BB%BA%E7%AB%8B.html" class="sidebar-item" aria-label="2. 交换机配置及 VLAN 建立"><!--[--><!--]--> 2. 交换机配置及 VLAN 建立 <!--[--><!--]--></a><!----></li><li><a href="/experiment/03-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E5%8F%8AVLAN%E9%97%B4%E8%B7%AF%E7%94%B1.html" class="sidebar-item" aria-label="3. 三层交换及 VLAN 间路由"><!--[--><!--]--> 3. 三层交换及 VLAN 间路由 <!--[--><!--]--></a><!----></li><li><a href="/experiment/04-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE.html" class="sidebar-item" aria-label="4. 路由器基本配置及静态路由配置"><!--[--><!--]--> 4. 路由器基本配置及静态路由配置 <!--[--><!--]--></a><!----></li><li><a href="/experiment/05-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E9%85%8D%E7%BD%AE.html" class="sidebar-item" aria-label="5. 动态路由协议的配置"><!--[--><!--]--> 5. 动态路由协议的配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="chapter-3-transport-layer" tabindex="-1"><a class="header-anchor" href="#chapter-3-transport-layer" aria-hidden="true">#</a> Chapter 3: Transport Layer</h1><h2 id="outline" tabindex="-1"><a class="header-anchor" href="#outline" aria-hidden="true">#</a> Outline</h2><ol><li><p>Transport-layer services</p></li><li><p>Multiplexing and demultiplexing</p></li><li><p>Connectionless transport: UDP</p></li><li><p>Principles of reliable data transfer</p></li><li><p>Connection-oriented transport: TCP</p><ul><li>segment structure</li><li>reliable data transfer</li><li>flow control</li><li>connection management</li></ul></li><li><p>Principles of congestion control</p></li><li><p>TCP congestion control</p></li></ol><h2 id="transport-layer-services" tabindex="-1"><a class="header-anchor" href="#transport-layer-services" aria-hidden="true">#</a> Transport-layer services</h2><h3 id="transport-vs-network-layer" tabindex="-1"><a class="header-anchor" href="#transport-vs-network-layer" aria-hidden="true">#</a> Transport vs. network layer</h3><p>网络层是协议栈中的第三层，负责处理互联网上每个主机之间的路由。该层有两个主要的任务：</p><ol><li>选择最佳路径将数据包发送到目标地址；</li><li>控制每个数据包在网络中的传输。网络层协议常用的是 IP（Internet Protocol），它定义了如何通过互联网把数据包从源主机传输到目标主机。</li></ol><p>传输层是协议栈中的第四层，是端到端通信的主要协议。传输层实现了数据传输的可靠性，并采用流控制和拥塞控制等机制来协调系统中的数据流。该层的两个最常用的协议是 TCP（Transmission Control Protocol）和 UDP（User Datagram Protocol）。TCP 提供可靠的数据传输，而 UDP 则提供无连接、不可靠和基于报文的传输。</p><p>因此，网络层和传输层具有不同的目的和职责。网络层处理路由和数据包转发，而传输层负责端到端通信可靠性，数据流控制和拥塞控制等方面的任务。</p><h2 id="multiplexing-and-demultiplexing" tabindex="-1"><a class="header-anchor" href="#multiplexing-and-demultiplexing" aria-hidden="true">#</a> Multiplexing and demultiplexing</h2><blockquote><p><a href="https://blog.csdn.net/SongXJ_01/article/details/106880461" target="_blank" rel="noopener noreferrer">计算机网络：多路复用（Multiplexing） VS 多路分解（Demultiplexing）_计算机 demultiplexing_SongXJ--的博客-CSDN 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="multiplexing-多路复用" tabindex="-1"><a class="header-anchor" href="#multiplexing-多路复用" aria-hidden="true">#</a> Multiplexing 多路复用</h3><p>从源主机的不同套接字（socket）中收集数据块，并为每个数据块封装上首部信息（这将在多路分解时使用）从而生成报文段（segment），然后将报文段传递到网络层的工作称为多路复用。</p><ul><li>在 TCP 或者 UDP 传输过程中，数据需要被不同程序识别，multiplexing 因此诞生</li><li>一般情况下 multiplexing 有以下几个 field 用于区分不同程序所需要的数据 source ip, source port, destination ip, destination port</li></ul><h3 id="demultiplexing-多路分解" tabindex="-1"><a class="header-anchor" href="#demultiplexing-多路分解" aria-hidden="true">#</a> Demultiplexing 多路分解</h3><p>将传输层报文段中的数据交付到正确的套接字的工作称为多路分解。</p><ul><li>通过检验上述 field, 传输协议（transport layer protocol）将不同数据包发送至正确的 socket port</li><li>0-1023 是被各种协议占用的端口，1024-65535 是一般程序可用的端口</li></ul></blockquote><h2 id="connectionless-transport-udp" tabindex="-1"><a class="header-anchor" href="#connectionless-transport-udp" aria-hidden="true">#</a> Connectionless transport: UDP</h2><h3 id="udp-user-datagram-protocol-rfc-768" tabindex="-1"><a class="header-anchor" href="#udp-user-datagram-protocol-rfc-768" aria-hidden="true">#</a> UDP: User Datagram Protocol [RFC 768]</h3><p>基础原理已经在 <a href="./02-application-layer#client-server-socket-udp">Chapter 2@Client/server socket: UDP</a> 讲过，不再赘述。</p><h3 id="udp-segment-header" tabindex="-1"><a class="header-anchor" href="#udp-segment-header" aria-hidden="true">#</a> UDP: segment header</h3><blockquote><p><a href="https://www.computernetworkingnotes.com/ccna-study-guide/segmentation-explained-with-tcp-and-udp-header.html" target="_blank" rel="noopener noreferrer">Segmentation Explained with TCP and UDP Header (computernetworkingnotes.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="segmentation" tabindex="-1"><a class="header-anchor" href="#segmentation" aria-hidden="true">#</a> Segmentation</h3><p>Segmentation is the process of dividing large data stream into smaller pieces. This functionality allows a host to send or receive a file of any size over the any size of network. For example, if network bandwidth is 1 Mbps and file size is 100 Mb, host can divide the file in 100 or more pieces. Once a piece becomes less or equal to the network bandwidth in size, it can be transferred easily. Destination host, upon(在…之后) receiving all pieces, joins them back to reproduce the original file.</p><p>If an application wants to use UDP to send its data, it can’t give the data to UDP in actual size. It has to use its own mechanism(机制) to detect whether segmentation is required or not. And if segmentation is required, it has to do it on its own before giving data to UDP.</p><h3 id="packing-data-for-transmission" tabindex="-1"><a class="header-anchor" href="#packing-data-for-transmission" aria-hidden="true">#</a> Packing data for transmission</h3><p>Both protocols pack data in similar fashion. Both add a header with each data piece. A header mainly contains two types of information;</p><ol><li>The information that is required to send the segment at the correct destination.</li><li>The information that is required to support the protocol specific features.</li></ol><h3 id="how-udp-work-with-header" tabindex="-1"><a class="header-anchor" href="#how-udp-work-with-header" aria-hidden="true">#</a> How UDP Work with header</h3><p>UDP neither provides any protocol specific service, nor adds any additional information in the header.</p><p>Following figure shows data with UDP header.</p><p><img src="data:image/png;base64,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" alt="UDP header"></p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Source port</td><td>Port number of the application that is transmitting data from the source computer</td></tr><tr><td>Destination port</td><td>Port number of the application that will receive the data at destination.</td></tr><tr><td>Length</td><td>Denotes the length of the UDP header and the UDP data</td></tr><tr><td>Checksum</td><td>CRC of the complete segment</td></tr><tr><td>Data</td><td>Data which it received from the application</td></tr></tbody></table></blockquote><h3 id="udp-checksum" tabindex="-1"><a class="header-anchor" href="#udp-checksum" aria-hidden="true">#</a> UDP checksum</h3><p>Goal: detect “errors” (e.g., flipped bits(比特位的翻转)) in transmitted segment</p><p>UDP（用户数据报协议）checksum 是一种用于检测 UDP 数据包完整性的简单校验和。当 UDP 数据包被发送到网络时，发送端计算校验和并将其添加到 UDP 数据包中的 checksum 字段中。接收端通过再次计算校验和并将其与数据包的 checksum 字段进行比较来检测数据包是否在传输过程中出现任何错误或损坏。如果计算出的校验和不匹配，则数据包被认为是损坏的。UDP 校验和是 UDP 协议的一项重要功能，可确保数据在传输过程中的完整性和正确性。</p><h2 id="principles-of-reliable-data-transfer" tabindex="-1"><a class="header-anchor" href="#principles-of-reliable-data-transfer" aria-hidden="true">#</a> Principles of reliable data transfer</h2><p>Characteristics(特点) of unreliable channel will determine(决定) complexity of reliable data transfer protocol.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Reliable data transfer(rdt) 即可靠传输。</p></div><blockquote><p><a href="https://juejin.cn/post/7030066301062086670" target="_blank" rel="noopener noreferrer">网络协议 7：【传输层】可靠传输（rdt）的原理 - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="/assets/6d5c25bbe2e5400fbc9335d7050819c1tplv-k3u1fbpfcp-zoom-in-crop-mark4536000-bc291cbe.webp" alt="image.png"></p><h3 id="rdt-1-0" tabindex="-1"><a class="header-anchor" href="#rdt-1-0" aria-hidden="true">#</a> rdt 1.0</h3><p>rdt 1.0 是基于<strong>理想情况下</strong>的协议，假设所有信道都是可靠的——没有比特位的翻转，没有数据包的丢失与超时。所以 rdt 1.0 的传输功能就是：<strong>发送方发送数据，接收方等着接受数据</strong>。</p><p><img src="/assets/image-20230330182543746-18712684.png" alt="image-20230330182543746"></p><h3 id="rdt-2-0" tabindex="-1"><a class="header-anchor" href="#rdt-2-0" aria-hidden="true">#</a> rdt 2.0</h3><ul><li>rdt 2.0 在 rdt1.0 的基础上考虑了 <strong>bit errors</strong>，即，不可信信道中数据包中的 1 可能会变 0，0 可能会变成 1。rdt2.0 的任务是<strong>发现并修复</strong>这些 bit errors</li><li>rdt 1.0 中接受者和发送者固定，rdt2.0 引入有限状态自动机 finite state machines (FSM) 来切换指定发送者和接受者</li></ul><div class="custom-container tip"><p class="custom-container-title">Finite State Machines</p><p>即只有有限种状态的，在特定条件下能切换状态的机器。比如刷卡就转的这种门禁机器。</p></div><p>rdt 2.0 增加了 3 种新机制来提升：</p><ol><li>通过 checksum 来错误校验</li><li>接收者反馈接受正误信息： <ul><li>acknowledgements (ACKs): receiver explicitly(明确地) tells sender that pkt() received OK</li><li>negative acknowledgements (NAKs): receiver explicitly tells sender that pkt had errors</li></ul></li><li>出错就重传</li></ol><p>即，传输层对应用层的数据进行打包处理时，新增 checksum（校验和），从而接收端可以对其数据包进行检验，如果正确，返回 ACK，发送者继续发送下一个数据包；如果不正确，返回 NAK，发送者重传数据。</p></blockquote></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: cworld0@qq.com">cworld1</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/02-application-layer.html" class="" aria-label="Chapter 2: Application Layer"><!--[--><!--]--> Chapter 2: Application Layer <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-d9904927.js" defer></script>
  </body>
</html>
