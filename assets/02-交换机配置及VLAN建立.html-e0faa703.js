import{_ as e,o as l,c as i,e as d}from"./app-179c21db.js";const o={},t=d('<h1 id="_2-交换机配置及-vlan-建立" tabindex="-1"><a class="header-anchor" href="#_2-交换机配置及-vlan-建立" aria-hidden="true">#</a> 2. 交换机配置及 VLAN 建立</h1><blockquote><p>VLAN：Local Virtal Area Network，即本地虚拟局域网络</p></blockquote><h2 id="实验目的" tabindex="-1"><a class="header-anchor" href="#实验目的" aria-hidden="true">#</a> 实验目的</h2><ul><li>了解交换机功能，学会使用 Windows 操作系统上的超级终端程序，通过交换机的控制口简单配置交换机。</li><li>学习一些交换机的基本配置命令。</li><li>学习查看配置过程中的出错信息和各种配置信息。</li><li>学习查看相关操作手册和帮助文档。</li><li>学习 VLAN 的建立、配置和调试命令。</li><li>学习如何实现 VLAN 间通讯，掌握交换机端口模式的使用。</li></ul><h2 id="实验原理" tabindex="-1"><a class="header-anchor" href="#实验原理" aria-hidden="true">#</a> 实验原理</h2><h3 id="连接方式" tabindex="-1"><a class="header-anchor" href="#连接方式" aria-hidden="true">#</a> 连接方式</h3><p>交换机的终端控制一般使用串专用串口或 Telnet。其中专用串口方式的连接一般为：</p><p>交换机 Console 口 ↔ 交换机 Console 线 ↔ PC 机串口（COM 口）</p><blockquote><p>注：</p><ol><li>串口，也叫 COM 口（Cluster Communication Port），即串行通讯端口。</li><li>注意连接不能太远，最好控制在 15 米以内（实验用的线为 RS232）。</li></ol></blockquote><h3 id="以太网端口链路类型" tabindex="-1"><a class="header-anchor" href="#以太网端口链路类型" aria-hidden="true">#</a> 以太网端口链路类型</h3><p>以太网端口有三种链路类型有三种：Access、Hybrid 和 Trunk。</p><ul><li>Access 类型的端口只能属于一个 VLAN，一般用于连接计算机的端口；</li><li>Trunk 类型的端口可以属于多个 VLAN，可以接收和发送多个 VLAN 的报文，一般用于路由器之间连接的端口；</li><li>Hybrid 类型的端口可以属于多个 VLAN，可以接收和发送多个 VLAN 的报文，可以用于路由器之间连接，也可以用于连接用户的计算机。</li></ul><blockquote><p>Hybrid 端口和 Trunk 端口的不同之处在于 Hybrid 端口可以允许多个 VLAN 的报文发送时不打标签，而 Trunk 端口只允许缺省 VLAN 的报文发送时不打标签。</p></blockquote><table><thead><tr><th>端口链路类型</th><th>适用连接对象</th></tr></thead><tbody><tr><td>Access</td><td>计算机</td></tr><tr><td>Trunk</td><td>主机通讯</td></tr><tr><td>Hybrid</td><td>计算机和主机通讯均可</td></tr></tbody></table><h3 id="终端常用命令" tabindex="-1"><a class="header-anchor" href="#终端常用命令" aria-hidden="true">#</a> 终端常用命令</h3><blockquote><p>三种视图：</p><ol><li>用户视图：<code>＜switch＞</code></li><li>系统视图：<code>［switch］</code></li><li>接口视图：<code>［switch-Ethernet**］</code></li><li>VLAN 视图：<code>［switch-vlan**］</code></li></ol></blockquote><p>通用命令：</p><ul><li><code>quit | return</code>：返回用户视图/退出当前端口</li><li><code>undo xxx</code>：取消执行某个命令</li><li><code>reboot</code>：重启当前交换机</li><li><code>display  history-command</code>：显示历史命令，命令行接口为每个用户缺省保存 10 条历史命令。临时调用命令可以尝试： <ul><li><kbd>Ctrl+P</kbd> 或 <kbd>↑</kbd>：上一条历史命令</li><li><kbd>Ctrl+N</kbd> 或 <kbd>↓</kbd>：下一条历史命令</li></ul></li><li><kbd>TAB</kbd>：快速补全命令</li></ul><p>用户视图下：</p><ul><li><code>system-view</code>：进入系统视图</li></ul><p>系统视图下：</p><ul><li><code>reset saved-configuration</code>：重置配置（需要重启应用配置）</li><li><code>display saved-configuration</code>：查看当前配置 其中部分显示信息： <ul><li><code>telnet server</code>：通过网络（Telnet）配置交换机</li><li><code>interface Vlan-interface*</code>：连接上游主机，其 ip 可以填写某个指定的 ip，也可以填写 dhcp-alloc（动态主机分配协议），使用上游主机自动分配 ip（ip 协议一般用来连接互联网）</li></ul></li><li><code>sysname &lt;switch-name&gt;</code>：给交换机重新命名</li><li><code>vlan &lt;vlan_id&gt;</code>：创建指定名称的 VLAN（VLAN 最多能定义 4094 个）</li><li><code>display|displ &lt;ethernet&gt;</code>：查看某个端口的状态</li><li><code>(interface) &lt;ethernet&gt;</code> 进入某个端口（如 ethernet0/1）的视图</li><li><code>save</code>：保存当前配置到本地，需要手动确认并命文件名（文件名可以默认）。</li></ul><p>端口视图下：</p><ul><li><code>display interface</code>：查看当前端口信息</li><li><code>speed 10|100|1000|auto</code>：设置端口的速度（如 10 代表 10M）</li><li><code>duplex auto|full|half</code>：设置端口的模式（自动、双工、半双工）</li><li><code>port link-type access|hybrid|trunk</code>：设置以太网端口的链路类型（Access、Hybrid 或 Trunk）</li><li><code>port access vlan &lt;vlan_id&gt; (to vlan_id)</code>：将该端口加入到指定 VLAN 下</li><li><code>port hybrid vlan &lt;vlan_id_list&gt; tagged|untagged</code>：将 Hybrid 端口加入到指定 VLAN</li><li><code>port trunk permit vlan &lt;vlan_id_list&gt;|all</code>：将当前以太网端口加入到指定 VLAN</li><li><code>shutdown</code>：关闭当前端口</li></ul><p>VLAN 视图下：</p><ul><li><code>display vlan</code>：查看当前 VLAN 信息</li><li><code>port &lt;interface_list&gt;</code>：将指定端口（或端口列表）添加到该 VLAN 下。</li></ul><h2 id="实验环境" tabindex="-1"><a class="header-anchor" href="#实验环境" aria-hidden="true">#</a> 实验环境</h2><ul><li>A PC with Windows XP, Super Shell（超级终端）</li><li>A Switch with 相关操作手册</li><li>A Console 线缆（RS232 型号）</li></ul><h2 id="实验步骤" tabindex="-1"><a class="header-anchor" href="#实验步骤" aria-hidden="true">#</a> 实验步骤</h2><h3 id="基础实验内容" tabindex="-1"><a class="header-anchor" href="#基础实验内容" aria-hidden="true">#</a> 基础实验内容</h3><ol><li>使用 Console 线将交换机的 Console 口与电脑 COM 口相连。</li><li>在 PC 机上运行超级终端程序进行连接： <ol><li>新建配置并为之命名，指定 COM 口。</li><li>设置终端通信参数为波特率（位/秒）为 9600bit/s ，数据位 8 位，无校验，停止位 1 位和无流控制。 ![](./02-交换机配置及 VLAN 建立.assets/Pasted image 20230308193235.png)</li></ol></li><li>连接终端：交换机上电，终端上开始显示以太网交换机的自检信息，自检结束后提示用户键入回车，之后将出现命令行提示符，如 <code>＜Quidway＞</code> 并可能伴随显示 <code>login from Console</code> 等提示，即表示交换机正确连接成功。</li><li>重置配置文件： <ol><li><code>reset saved-configuration</code>：还原初始配置（用户视图下使用）</li><li><code>reboot</code>：重启交换机（用户视图下使用）</li><li><code>display  current-configuration</code>：显示当前配置信息</li></ol></li><li><code>sysname SwitchA</code>：修改交换机名称</li></ol><h3 id="实验-1-在同一台交换机上划分-vlan" tabindex="-1"><a class="header-anchor" href="#实验-1-在同一台交换机上划分-vlan" aria-hidden="true">#</a> 实验 1：在同一台交换机上划分 VLAN</h3><p>STEP 1：图示搭建网络环境,每 6 人为一组,均通过网线连接在同一台交换机上,分别连接在交换机的 1-6 号口。为各计算配置 IP 地址（网关可以暂时不配），要求在同一网段，然后用 ping 命令测试其连通性，六台计算机属于同一 VLAN 的情况，应该都能连通。</p><p>![](./02-交换机配置及 VLAN 建立.assets/Pasted image 20230308201241.png)</p><p>STEP 2：在 6 台计算机完全连通之后，将同在一侧的三台计算机所在的端口划分为一个 VLAN，另一侧的三台计算机所在的端口划分为另一个 VLAN（VLAN 编号自由设定）。利用 ping 命令测试其连通性，可以发现同属一个 VLAN 计算机可以连通，而不同 VLAN 计算机不能连通。删除 VLAN，六台计算机恢复全连通状态。</p><p>![](./02-交换机配置及 VLAN 建立.assets/Pasted image 20230308201356.png)</p><ol><li><code>vlan 10</code>：创建 VLAN</li><li><code>vlan 10</code>：进入 VLAN 10</li><li><code>port ethernet 1/0/1 to ethernet 1/0/4</code>：将 1~4 端口接入到 VLAN10 内</li><li><code>quit</code>：退出 VLAN 10</li><li>各台电脑均接入交换机，并设置好 IP 地址，互相使用 <code>ping</code> 指令测试连通性。</li><li><code>vlan 11</code>：创建 VLAN 11</li><li><code>vlan 11</code>：进入 VLAN 11</li><li><code>port ethernet 1/0/3 to ethernet 1/0/4</code>：将 3~4 端口接入到 VLAN11 内</li><li><code>quit</code>：退出 VLAN 11</li><li>3、4 电脑互相 <code>ping</code> 进行测试，并对 1、2 电脑尝试 <code>ping</code> 测试。</li></ol><h3 id="实验-2-同一个-vlan-的跨交换机通讯" tabindex="-1"><a class="header-anchor" href="#实验-2-同一个-vlan-的跨交换机通讯" aria-hidden="true">#</a> 实验 2：同一个 VLAN 的跨交换机通讯</h3><ol><li><code>interface ethernet 1/0/1</code>：进入端口 <code>ethernet 1/0/1</code></li><li><code>port trunk</code>：设置当前以太网端口的链路类型为 Trunk</li><li><code>port trunk permit vlan 11</code>：将当前以太网端口加入到 VLAN 11</li><li>使用相同操作设置另外一台交换机</li><li>将两台交换机的端口 1 相互连接</li><li>对两台交换机对应的 3、4 电脑互相 <code>ping</code> 进行测试，并对 2 电脑尝试 <code>ping</code> 测试。</li></ol>',39),c=[t];function a(r,n){return l(),i("div",null,c)}const s=e(o,[["render",a],["__file","02-交换机配置及VLAN建立.html.vue"]]);export{s as default};
