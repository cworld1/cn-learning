<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.62">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta property="og:url" content="https://cn.cworld.top/05-network-layer-2.html"><meta property="og:site_name" content="Computer Network Learning"><meta property="og:title" content="Chapter 5: Network Layer (The Control Plane)"><meta property="og:description" content="Outline 1. introduction 2. routing protocols 3. intra-AS routing in the Internet: OSPF 4. routing among the ISPs: BGP 5. The SDN control plane link state; distance vector; 6. IC..."><meta property="og:type" content="article"><meta property="og:image" content="https://cn.cworld.top/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-06-01T08:34:58.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Chapter 5: Network Layer (The Control Plane)"><meta property="article:author" content="CWorld"><meta property="article:modified_time" content="2023-06-01T08:34:58.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Chapter 5: Network Layer (The Control Plane)","image":["https://cn.cworld.top/"],"dateModified":"2023-06-01T08:34:58.000Z","author":[{"@type":"Person","name":"CWorld"}]}</script><link rel="icon" href="/icons/favicon.png"><meta name="theme-color" content="#3eaf7c"><link rel="manifest" href="/manifest.webmanifest"><title>Chapter 5: Network Layer (The Control Plane) | Computer Network Learning</title><meta name="description" content="Outline 1. introduction 2. routing protocols 3. intra-AS routing in the Internet: OSPF 4. routing among the ISPs: BGP 5. The SDN control plane link state; distance vector; 6. IC...">
    <link rel="preload" href="/assets/style-22c397d2.css" as="style"><link rel="stylesheet" href="/assets/style-22c397d2.css">
    <link rel="modulepreload" href="/assets/app-6fefc517.js"><link rel="modulepreload" href="/assets/05-network-layer-2.html-8bac3d3a.js"><link rel="modulepreload" href="/assets/05-network-layer-2.html-04ac30c1.js"><link rel="prefetch" href="/assets/01-introduction.html-a33f51d0.js" as="script"><link rel="prefetch" href="/assets/02-application-layer.html-ed252827.js" as="script"><link rel="prefetch" href="/assets/03-transport-layer.html-7d81b72f.js" as="script"><link rel="prefetch" href="/assets/04-network-layer.html-5eb79a9d.js" as="script"><link rel="prefetch" href="/assets/06-link-layer-and-lans.html-31b844fd.js" as="script"><link rel="prefetch" href="/assets/index.html-5d9fa91b.js" as="script"><link rel="prefetch" href="/assets/intro.html-d83d8780.js" as="script"><link rel="prefetch" href="/assets/00-getting-started.html-517ad034.js" as="script"><link rel="prefetch" href="/assets/01-网络基础知识及双绞线的制作.html-d9cfb8d5.js" as="script"><link rel="prefetch" href="/assets/02-交换机配置及VLAN建立.html-9962d529.js" as="script"><link rel="prefetch" href="/assets/03-三层交换及VLAN间路由.html-46278dd3.js" as="script"><link rel="prefetch" href="/assets/04-路由器基本配置及静态路由配置.html-b3a260ef.js" as="script"><link rel="prefetch" href="/assets/05-动态路由协议的配置.html-5f986910.js" as="script"><link rel="prefetch" href="/assets/06-访问控制列表及防火墙使用.html-739e3f80.js" as="script"><link rel="prefetch" href="/assets/07-应用服务器的配置.html-cbba45db.js" as="script"><link rel="prefetch" href="/assets/404.html-29cf9d4c.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-35851412.js" as="script"><link rel="prefetch" href="/assets/02-application-layer.html-26b52872.js" as="script"><link rel="prefetch" href="/assets/03-transport-layer.html-000a1dae.js" as="script"><link rel="prefetch" href="/assets/04-network-layer.html-71f70aef.js" as="script"><link rel="prefetch" href="/assets/06-link-layer-and-lans.html-5515f0b7.js" as="script"><link rel="prefetch" href="/assets/index.html-fd628a6b.js" as="script"><link rel="prefetch" href="/assets/intro.html-8dd027b5.js" as="script"><link rel="prefetch" href="/assets/00-getting-started.html-2780ccd0.js" as="script"><link rel="prefetch" href="/assets/01-网络基础知识及双绞线的制作.html-d143efae.js" as="script"><link rel="prefetch" href="/assets/02-交换机配置及VLAN建立.html-269a6354.js" as="script"><link rel="prefetch" href="/assets/03-三层交换及VLAN间路由.html-b8f99208.js" as="script"><link rel="prefetch" href="/assets/04-路由器基本配置及静态路由配置.html-8a3507b7.js" as="script"><link rel="prefetch" href="/assets/05-动态路由协议的配置.html-1b0b1e6a.js" as="script"><link rel="prefetch" href="/assets/06-访问控制列表及防火墙使用.html-dee59e6e.js" as="script"><link rel="prefetch" href="/assets/07-应用服务器的配置.html-7b1f64d0.js" as="script"><link rel="prefetch" href="/assets/404.html-1e37705b.js" as="script"><link rel="prefetch" href="/assets/index-e32a7948.js" as="script"><link rel="prefetch" href="/assets/giscus-52604b1e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Computer Network Learning</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/intro.md" class="" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://blog.cworld.top" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cworld1/cn-learning" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/intro.md" class="" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://blog.cworld.top" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cworld1/cn-learning" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Tutorial <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/index.md" class="sidebar-item" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a><!----></li><li><a href="/intro.md" class="sidebar-item" aria-label="Intro"><!--[--><!--]--> Intro <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Main Chapters <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/01-introduction.html" class="sidebar-item" aria-label="Chapter 1: Introduction"><!--[--><!--]--> Chapter 1: Introduction <!--[--><!--]--></a><!----></li><li><a href="/02-application-layer.html" class="sidebar-item" aria-label="Chapter 2: Application Layer"><!--[--><!--]--> Chapter 2: Application Layer <!--[--><!--]--></a><!----></li><li><a href="/03-transport-layer.html" class="sidebar-item" aria-label="Chapter 3: Transport Layer"><!--[--><!--]--> Chapter 3: Transport Layer <!--[--><!--]--></a><!----></li><li><a href="/04-network-layer.html" class="sidebar-item" aria-label="Chapter 4: Network Layer (The Data Plane)"><!--[--><!--]--> Chapter 4: Network Layer (The Data Plane) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Chapter 5: Network Layer (The Control Plane)"><!--[--><!--]--> Chapter 5: Network Layer (The Control Plane) <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/05-network-layer-2.html#outline" class="router-link-active router-link-exact-active sidebar-item" aria-label="Outline"><!--[--><!--]--> Outline <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#introduction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#routing-protocols" class="router-link-active router-link-exact-active sidebar-item" aria-label="Routing protocols"><!--[--><!--]--> Routing protocols <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#intra-as-routing-in-the-internet-ospf" class="router-link-active router-link-exact-active sidebar-item" aria-label="Intra-AS routing in the Internet: OSPF"><!--[--><!--]--> Intra-AS routing in the Internet: OSPF <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#routing-among-the-isps-bgp" class="router-link-active router-link-exact-active sidebar-item" aria-label="routing among the ISPs: BGP"><!--[--><!--]--> routing among the ISPs: BGP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#the-sdn-control-plane" class="router-link-active router-link-exact-active sidebar-item" aria-label="The SDN control plane"><!--[--><!--]--> The SDN control plane <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#icmp-the-internet-control-message-protocol" class="router-link-active router-link-exact-active sidebar-item" aria-label="ICMP: The Internet Control Message Protocol"><!--[--><!--]--> ICMP: The Internet Control Message Protocol <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#network-management-and-snmp" class="router-link-active router-link-exact-active sidebar-item" aria-label="Network management and SNMP"><!--[--><!--]--> Network management and SNMP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/05-network-layer-2.html#summary" class="router-link-active router-link-exact-active sidebar-item" aria-label="Summary"><!--[--><!--]--> Summary <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/06-link-layer-and-lans.html" class="sidebar-item" aria-label="Chapter 6: The Link Layer and LANs"><!--[--><!--]--> Chapter 6: The Link Layer and LANs <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Experiments <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/experiment/00-getting-started.html" class="sidebar-item" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a><!----></li><li><a href="/experiment/01-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E5%8F%8C%E7%BB%9E%E7%BA%BF%E7%9A%84%E5%88%B6%E4%BD%9C.html" class="sidebar-item" aria-label="1. 网络基础知识及双绞线的制作"><!--[--><!--]--> 1. 网络基础知识及双绞线的制作 <!--[--><!--]--></a><!----></li><li><a href="/experiment/02-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8F%8AVLAN%E5%BB%BA%E7%AB%8B.html" class="sidebar-item" aria-label="2. 交换机配置及 VLAN 建立"><!--[--><!--]--> 2. 交换机配置及 VLAN 建立 <!--[--><!--]--></a><!----></li><li><a href="/experiment/03-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E5%8F%8AVLAN%E9%97%B4%E8%B7%AF%E7%94%B1.html" class="sidebar-item" aria-label="3. 三层交换及 VLAN 间路由"><!--[--><!--]--> 3. 三层交换及 VLAN 间路由 <!--[--><!--]--></a><!----></li><li><a href="/experiment/04-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE.html" class="sidebar-item" aria-label="4. 路由器基本配置及静态路由配置"><!--[--><!--]--> 4. 路由器基本配置及静态路由配置 <!--[--><!--]--></a><!----></li><li><a href="/experiment/05-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E9%85%8D%E7%BD%AE.html" class="sidebar-item" aria-label="5. 动态路由协议的配置"><!--[--><!--]--> 5. 动态路由协议的配置 <!--[--><!--]--></a><!----></li><li><a href="/experiment/06-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%E5%8F%8A%E9%98%B2%E7%81%AB%E5%A2%99%E4%BD%BF%E7%94%A8.html" class="sidebar-item" aria-label="6. 访问控制列表及防火墙使用"><!--[--><!--]--> 6. 访问控制列表及防火墙使用 <!--[--><!--]--></a><!----></li><li><a href="/experiment/07-%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE.html" class="sidebar-item" aria-label="7. 应用服务器的配置"><!--[--><!--]--> 7. 应用服务器的配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="outline" tabindex="-1"><a class="header-anchor" href="#outline" aria-hidden="true">#</a> Outline</h2><ol><li>introduction</li><li>routing protocols</li><li>intra-AS routing in the Internet: OSPF</li><li>routing among the ISPs: BGP</li><li>The SDN control plane <ul><li>link state</li><li>distance vector</li></ul></li><li>ICMP: The Internet Control Message Protocol</li><li>Network management and SNMP</li></ol><blockquote><p>部分内容参考自 <a href="https://blog.csdn.net/weixin_53580595/article/details/129482346" target="_blank" rel="noopener noreferrer">【计算机网络-自顶向下】5—Network Layer:Control Plane 网络层：控制平面（概述、路由选择算法、OSPF、BGP、SDN、ICMP、SNMP）_一棵___大树的博客-CSDN 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，有删改。</p></blockquote><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><ul><li><p><strong>每个路由器控制（Per-router control）</strong>：每台路由器有一个路由选择组件，用于与其他路由器中的路由选择组件通信，以计算其转发表的值。如下图所示：</p><p><img src="/assets/image-20230504180344082-077ed984.png" alt="image-20230504180344082" loading="lazy"></p></li><li><p><strong>逻辑集中式控制（Logically centralized control）</strong>：逻辑集中式控制器计算并分发转发表以供每台路由器使用，如下图所示：</p><p><img src="/assets/image-20230504180725563-971ac105.png" alt="image-20230504180725563" loading="lazy"></p></li></ul><h2 id="routing-protocols" tabindex="-1"><a class="header-anchor" href="#routing-protocols" aria-hidden="true">#</a> Routing protocols</h2><p><em>goal:</em> determine(确定) “good” paths (equivalently, routes 等效于路由器), from sending hosts to receiving host, through network of routers</p><h3 id="introduction-of-routing-protocols" tabindex="-1"><a class="header-anchor" href="#introduction-of-routing-protocols" aria-hidden="true">#</a> Introduction of Routing protocols</h3><h4 id="graph-abstraction-of-the-network" tabindex="-1"><a class="header-anchor" href="#graph-abstraction-of-the-network" aria-hidden="true">#</a> Graph abstraction of the network</h4><p><img src="/assets/image-20230504181315974-4ce8c368.png" alt="image-20230504181315974" loading="lazy"></p><p>其中：</p><ul><li><p>graph: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>N</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (N,E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mtext>set of routers</mtext><mo>=</mo><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi></mrow></mrow><annotation encoding="application/x-tex">N = \text{set of routers} = { u, v, w, x, y, z }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">set of routers</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mtext>set of links</mtext><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">E = \text{set of links} = \{ (u,v), (u,x), (v,x), (v,w), (x,w), (x,y), (w,y), (w,z), (y,z) \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">set of links</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)}</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo>=</mo><mtext>cost of link </mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">c(x,x&#39;) = \text{cost of link}\ (x,x&#39;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">cost of link</span></span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>e.g., <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">c(w,z) = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span></p></li></ul><h4 id="routing-algorithm" tabindex="-1"><a class="header-anchor" href="#routing-algorithm" aria-hidden="true">#</a> Routing algorithm</h4><p>即路由选择算法。</p><p>分类上，从 global or decentralized information:</p><ul><li><p><em>global:</em> all routers have complete topology, link cost info 都有完整的拓扑结构，链路成本信息</p></li><li><p><em>decentralized:</em> router knows physically-connected neighbors, link costs to neighbors 路由器知道物理连接的邻居，与邻居的链路成本</p><p>iterative process of computation, exchange of info with neighbors 计算的迭代过程，与邻居交换信息</p></li></ul><p>从 static or dynamic:</p><ul><li><p><em>static</em>: routes change slowly over time</p></li><li><p><em>dynamic</em>: routes change more quickly</p><p>periodic update 定期更新 in response to link cost changes 响应链接成本总是保持变化的</p></li></ul><p>算法上：</p><ul><li>集中式路由选择算法（centralized routing algorithm）：用完整、全局性的网络知识计算出从源到目的地之间的最低开销路径。具有全局状态信息的算法常被称作链路状态（Link State，LS）算法，因为该算法必须知道网络中每条链路的开销。</li><li>分散式路由选择算法（decentralized routing algorithm）：路由器以迭代、分布式计算的方式计算出最低开销路径。没有节点拥有关于网络链路开销的完整信息。一个分散式路由选择算法为距离向量（Distance-Vector，DV）算法，每个节点维护到网络中所有其他节点的开销估计的向量。</li></ul><h3 id="link-state" tabindex="-1"><a class="header-anchor" href="#link-state" aria-hidden="true">#</a> Link state</h3><p>在实践中，这经常由链路状态广播（link state broadcast）算法完成。下面给出的链路状态路由选择算法叫做 Dijkstra 算法，其计算从某节点（源节点 u）到网络中所有其他节点的最低开销路径。</p><p>基本思想：经算法的第 k 次迭代后，可知道到 k 个目的节点的最低开销路径，在到所有目的节点的最低开销路径之中，这 k 条路径具有 k 个最低开销。</p><p>我们定义如下符号：</p><ul><li><code>D(v)</code>：到算法的本次迭代，从源节点到目的节点 v 的最低开销；</li><li><code>p(v)</code>：从源到 v 沿着当前最小开销路径的前一个节点（v 的邻居）；</li><li><code>N&#39;</code>：节点子集；如果从源到 v 的最低开销路径已经确定，v 在<code>N&#39;</code>中。</li></ul><p>源节点 u 的链路状态（LS）算法如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Initialization:</span>
N&#39; <span class="token operator">=</span> <span class="token punctuation">{</span>u<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token builtin">all</span> nodes v
<span class="token keyword">if</span> v adjacent to u
    then D<span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span> c<span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
<span class="token keyword">else</span> D<span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span> ∞

<span class="token comment"># Loop</span>
find w <span class="token keyword">not</span> <span class="token keyword">in</span> N&#39; such that D<span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token keyword">is</span> a minimum
add w to N&#39;
update D<span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token builtin">all</span> v adjacent to w <span class="token keyword">and</span> <span class="token keyword">not</span> <span class="token keyword">in</span> N&#39; <span class="token punctuation">:</span>
    D<span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span> D<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> D<span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">(</span>w<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">*</span> new cost to v <span class="token keyword">is</span> either old cost to v <span class="token keyword">or</span> known
shortest path cost to w plus cost <span class="token keyword">from</span> w to v <span class="token operator">*</span><span class="token operator">/</span>
<span class="token comment"># until all nodes in N&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于下图的网络，链路状态算法迭代运行如下：</p><p><img src="/assets/image-20230504182538261-7fcade07.png" alt="image-20230504182538261" loading="lazy"></p><table><thead><tr><th>Step</th><th>N&#39;</th><th>D(v),p(v)</th><th>D(w),p(w)</th><th>D(x),p(x)</th><th>D(y),p(y)</th><th>D(z),p(z)</th></tr></thead><tbody><tr><td>0</td><td>u</td><td>2,u</td><td>5,u</td><td>1,u</td><td>∞</td><td>∞</td></tr><tr><td>1</td><td>ux</td><td>2,u</td><td>4,x</td><td></td><td>2,x</td><td>∞</td></tr><tr><td>2</td><td>uxy</td><td>2,u</td><td>3,y</td><td></td><td></td><td>4,y</td></tr><tr><td>3</td><td>uxyv</td><td></td><td>3,y</td><td></td><td></td><td>4,y</td></tr><tr><td>4</td><td>uxyvw</td><td></td><td></td><td></td><td></td><td>4,y</td></tr><tr><td>5</td><td>uxyvwz</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>路线上的流量变化和拥塞会使 LS 算法产生 <strong>路由震荡（Routing Oscillations）</strong>。</p><h3 id="distance-vector" tabindex="-1"><a class="header-anchor" href="#distance-vector" aria-hidden="true">#</a> Distance vector</h3><p>距离向量（Distance-Vector，DV）算法是一种迭代的（iterative）、异步的（asynchronous）、分布式的（distributed）和自我终止的（self-termination）。</p><div class="custom-container tip"><p>这种方法没有组建图，只通过方程不断迭代更新数据，收集了与邻居之间的信息。</p></div><p>令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_x(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 是从节点 x 到节点 y 的最低开销路径。则该最低开销与著名的 Bellman-Ford 方程相关，即：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mi>v</mi></munder><mrow><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>d</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex"> d_x(y)=\min_v{c(x,v)+d_v(y)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.45em;vertical-align:-0.7em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span></span></p><p>方程中的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>min</mi><mo>⁡</mo></mrow><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">\min_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是对于 x 的所有邻居的。</p><p>算法基本思想：每个节点 x 以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_x(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 开始，对在 N 中的所有节点 y，估计从 x 到 y 的最低开销路径的开销路径。</p><p>DV 算法具体实例如下：</p><p><img src="/assets/image-20230511161522754-4641ffbe.png" alt="image-20230511161522754" loading="lazy"></p><h4 id="链路开销改变与链路故障" tabindex="-1"><a class="header-anchor" href="#链路开销改变与链路故障" aria-hidden="true">#</a> 链路开销改变与链路故障</h4><p>链路开销发生改变：</p><ul><li>node detects local link cost change 节点检测本地链路成本变化</li><li>updates routing info, recalculates distance vector 重新计算距离矢量</li><li>if DV changes, notify neighbors</li></ul><p>有时当链路中有一条路的距离极长甚至接近于开路，这时我们会遇到<strong>路由选择环路（routing loop）</strong>，这样的问题也被称为**无穷计数（count-to-infinity）**问题。</p><h4 id="距离向量算法-增加毒性逆转" tabindex="-1"><a class="header-anchor" href="#距离向量算法-增加毒性逆转" aria-hidden="true">#</a> 距离向量算法：增加毒性逆转</h4><p>毒性逆转（poisoned reverse），思想：如果 z 通过 y 路由选择目的地 x，则 z 将通告 y，它到 x 的距离是无穷大，也就是 z 将通告：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>D</mi><mi>z</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex"> D_z(x)=\infin </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span></span></p><p>但毒性逆转并不能解决一般的无穷计数问题。</p><h3 id="comparison-of-ls-and-dv-algorithms" tabindex="-1"><a class="header-anchor" href="#comparison-of-ls-and-dv-algorithms" aria-hidden="true">#</a> Comparison of LS and DV algorithms</h3><p>message complexity 消息复杂性:</p><ul><li><p>LS: with n nodes, E links, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nE)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> msgs sent</p></li><li><p>DV: exchange between neighbors only</p><p>convergence time varies 收敛时间不同</p></li></ul><p>speed of convergence 收敛速度:</p><ul><li><p>LS: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> algorithm requires <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nE)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> msgs</p><p>may have oscillations 可能有震荡</p></li><li><p>DV: convergence time varies</p><p>may be routing loops 可能是路由环路</p><p>count-to-infinity problem 计数无穷大问题</p></li></ul><div class="custom-container tip"><p class="custom-container-title">robustness: what happens if router malfunctions?</p><p>稳健性：如果路由器出现故障会怎样？</p><p>LS:</p><ul><li>node can advertise incorrect link cost 节点可以通告不正确的链接成本</li><li>each node computes only its own table 每个节点仅计算自己的表</li></ul><p>DV:</p><ul><li>DV node can advertise incorrect path cost DV 节点可以通告不正确的路径成本</li><li>each node’s table used by others 其他节点使用的每个节点的表</li><li>error propagate thru network 错误也会通过网络传播</li></ul></div><h2 id="intra-as-routing-in-the-internet-ospf" tabindex="-1"><a class="header-anchor" href="#intra-as-routing-in-the-internet-ospf" aria-hidden="true">#</a> Intra-AS routing in the Internet: OSPF</h2><p>因特网中自治系统内部的路由选择：OSPF（开放最短路优先 Open Shortest Path First）</p><p>随着路由器规模增大和管理自治的要求，可以通过将路由器组织进自治系统（Autonomous System，AS）来解决。在一个自治系统内运行的路由算法叫做自治系统内部路由选择协议（intra-autonomous system routing protocol）。</p><div class="custom-container tip"><p class="custom-container-title">市面上的常见路由协议</p><p>基于 DV:</p><ul><li><p>RIP</p></li><li><p>IGRP</p></li><li><p>EIGRP</p></li></ul><p>基于 LS:</p><ul><li><p>OSPF（主流）</p></li><li><p>IS-IS</p></li></ul></div><p>OSPF 是一种链路状态协议，它使用洪泛链路状态信息和 Dijkstra 最低开销路径算法。使用 OSPF，一台路由器构建了一幅关于整个自治系统的完整拓扑图。于是，每台路由器在本地运行 Dijkstra 的最短路径算法，以确定一个自身为根节点到所有子网的最短路径树。</p><p>使用 OSPF 时，路由器向自治系统内所有其他路由器广播路由选择信息，而不仅仅是向其相邻路由器广播。每当一条链路的状态发生变化时，路由器就会广播链路状态信息。</p><p>OSPF 的优点：</p><ul><li>安全（Security）：能够鉴别 OSPF 路由器之间的交换；</li><li>多条相同开销的路径（Multiple same-cost paths）：允许使用多条路径；</li><li>对单播与多播路由选择的综合支持（Integrated support for unicast and multicast routing）；</li><li>支持在单个 AS 中的层次结构（Support for hierarchy within a single AS）。</li></ul><h2 id="routing-among-the-isps-bgp" tabindex="-1"><a class="header-anchor" href="#routing-among-the-isps-bgp" aria-hidden="true">#</a> routing among the ISPs: BGP</h2><p>当分组跨越多个 AS 进行路由时，我们需要一个<strong>自治系统间路由协议（inter-autonomous system routing protocol）</strong>。在因特网中，所有的 AS 运行相同的 AS 间路由选择协议，称为<strong>边界网关协议（Broder Gateway Protocol，BGP）</strong>。</p><p>BGP provides each AS a means to:</p><ul><li><strong>eBGP</strong>: obtain subnet reachability information from neighboring ASes. 从相邻 AS 获取子网可访问性信息</li><li><strong>iBGP</strong>: propagate reachability information to all AS-internal routers. 将可达性信息传播到所有 AS 内部路由器</li></ul><p>and it determines “good” routes to other networks based on reachability information and <em>policy</em>(可达性信息和策略)</p><h3 id="bgp-的作用" tabindex="-1"><a class="header-anchor" href="#bgp-的作用" aria-hidden="true">#</a> BGP 的作用</h3><p>在 BGP 中，分组并不是路由到一个特定的目的地址，相反是路由到 CIDR 化的前缀，其中每个前缀表示一个子网或者一个子网集合。</p><p>BGP 为每台服务器提供完成以下任务的手段：</p><ul><li><p>从邻居 AS 获得前缀的可达性信息 Obtain prefix reachability information from neighboring ASs；</p></li><li><p>确定到该前缀的“最好”的路由 Determine the “best” routes to the prefixes.</p></li></ul><h3 id="ebgp-ibgp-connections" tabindex="-1"><a class="header-anchor" href="#ebgp-ibgp-connections" aria-hidden="true">#</a> eBGP, iBGP connections</h3><p>通告 BGP 路由信息</p><p>对于每个 AS，每台路由器要么是一台网关路由器（getaway router），要么是一台内部路由器（internal router）。在 BGP 中，每对路由器通过使用 179 端口的半永久 TCP 连接交换路由选择信息。跨越两个 AS 的 BGP 连接称为**外部 BGP（eBGP）连接，而在相同 AS 中的两台路由器之间的 BGP 会话称为内部 BGP（iBGP）**连接。</p><p>两种连接如下图所示：</p><p><img src="/assets/image-20230511173436938-7f216046.png" alt="image-20230511173436938" loading="lazy"></p><p>BGP 会话：</p><p>两个 BGP 路由器（“对等方”）通过半永久 TCP 连接交换 BGP 消息：通告到不同目标网络前缀的路径（BGP 是一种“path vector”协议）</p><h3 id="bgp-messages" tabindex="-1"><a class="header-anchor" href="#bgp-messages" aria-hidden="true">#</a> BGP messages</h3><p>BGP messages exchanged between peers over TCP connection.</p><p>BGP messages:</p><ul><li><code>OPEN</code>: opens TCP connection to remote BGP peer(与远程 BGP 对等体) and authenticates sending BGP peer</li><li><code>UPDATE</code>: advertises new path (or withdraws old 撤回旧路径)</li><li><code>KEEPALIVE</code>: keeps connection alive in absence of <code>UPDATES</code>(没有更新的情况下); also ACKs <code>OPEN</code> request(确认打开请求)</li><li><code>NOTIFICATION</code>: reports errors in previous msg; also used to close connection</li></ul><h3 id="bgp-ospf-forwarding-table-entries" tabindex="-1"><a class="header-anchor" href="#bgp-ospf-forwarding-table-entries" aria-hidden="true">#</a> BGP, OSPF, forwarding table entries</h3><p>How does router set forwarding table entry to distant prefix?</p><p><img src="/assets/image-20230511173842188-f593a0b4.png" alt="image-20230511173842188" loading="lazy"></p><h3 id="path-attributes-and-bgp-routes" tabindex="-1"><a class="header-anchor" href="#path-attributes-and-bgp-routes" aria-hidden="true">#</a> Path attributes and BGP routes</h3><p>advertised prefix includes BGP attributes 播发的前缀其实包括 BGP 属性:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>prefix</mtext><mo>+</mo><mtext>attributes</mtext><mo>=</mo><mtext>“route”</mtext></mrow><annotation encoding="application/x-tex"> \text{prefix} + \text{attributes} = \text{“route”} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">prefix</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">attributes</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">“route”</span></span></span></span></span></span></p><p>其中 two important attributes:</p><ul><li><code>AS-PATH:</code> list of ASes through which prefix advertisement has passed</li><li><code>NEXT-HOP</code>: indicates(指示) specific internal-AS router to next-hop(下一跃点) AS</li></ul><h3 id="determining-the-best-routes" tabindex="-1"><a class="header-anchor" href="#determining-the-best-routes" aria-hidden="true">#</a> Determining the Best Routes</h3><p>通告前缀包括一些 BGP 属性（BGP attribute），前缀及其属性称为路由（route）。</p><h4 id="热土豆路由选择" tabindex="-1"><a class="header-anchor" href="#热土豆路由选择" aria-hidden="true">#</a> 热土豆路由选择</h4><p>hot potato routing</p><p>热土豆路由选择的基本思想是：<strong>对于一个路由，尽可能快地将分组送出其 AS，而不必担心其 AS 外部到目的地的余下部分的开销</strong>。</p><p>在路由器转发表中增加 AS 外部目的地的步骤：</p><p><img src="/assets/image-20230217103850062-40225edc.png" alt="image-20230217103850062" loading="lazy"></p><h4 id="路由选择算法" tabindex="-1"><a class="header-anchor" href="#路由选择算法" aria-hidden="true">#</a> 路由选择算法</h4><p>Route-Selection Algorithm</p><p>如果到相同前缀有两条或多条路由，则顺序地调用下列消除规则知道余下一条路由：</p><ol><li>路由被指派一个本地偏好（local preference）值作为其属性值之一，具有最高本地偏好值的将被选择；</li><li>从余下的路由中，将选择具有最短<code>AS-PATH</code>的路由；</li><li>从余下的路由中，使用热土豆路由选择，即选择具有最靠近<code>NEXT-HOP</code>路由器的路由；</li><li>如果仍留下多条路由，该路由器使用 BGP 标识符来选择路由。</li></ol><h3 id="ip-任播" tabindex="-1"><a class="header-anchor" href="#ip-任播" aria-hidden="true">#</a> IP 任播</h3><p>IP 任播的动机：</p><ol><li>在许多分散的不同地理位置，替换不同服务器上的相同内容；</li><li>让每个用户从最靠近的服务器访问内容。</li></ol><p>使用 IP 任播将用户引向最近的 CDN 服务器如下图：</p><p><img src="/assets/image-20230218222118235-2237576b.png" alt="image-20230218222118235" loading="lazy"></p><h3 id="路由选择策略" tabindex="-1"><a class="header-anchor" href="#路由选择策略" aria-hidden="true">#</a> 路由选择策略</h3><p>Routing Policy</p><p>如下图所示，X 是一个<strong>多宿主接入 ISP（multi-homed stub network）</strong>，因为它是经由两个不同的提供商连到网络的其余部分。</p><p><img src="/assets/image-20230511182105569-894ac6e5.png" alt="image-20230511182105569" loading="lazy"></p><ul><li>A advertises path Aw to B and to C</li><li>B <em>chooses not to advertise</em> BAw to C</li></ul><p>ISP 遵循的法则：任何穿越某 ISP 主干网的流量必须是其源或者目的位于该 ISP 的某个客户网络中；不然的话这些流量将会免费搭车通过该 ISP 的网络。</p><p>区分 AS 间和 AS 内部路由选择的原因：</p><ul><li>策略（Policy）；</li><li>规模（Scale）；</li><li>性能（Performance）；</li></ul><h2 id="the-sdn-control-plane" tabindex="-1"><a class="header-anchor" href="#the-sdn-control-plane" aria-hidden="true">#</a> The SDN control plane</h2><h3 id="software-defined-networking-sdn" tabindex="-1"><a class="header-anchor" href="#software-defined-networking-sdn" aria-hidden="true">#</a> Software defined networking (SDN)</h3><p>Internet network layer: historically has been implemented via distributed, per-router approach(历史上一直通过分布式、每路由器方法实现), and till 2005: renewed interest in rethinking network control plane(重新审视网络控制平面的兴趣)</p><p>Why a logically centralized control plane? 为什么选择逻辑集中的控制平面？</p><ul><li>更轻松的网络管理：避免路由器配置错误，提高流量灵活性</li><li>基于表的转发（回想一下 OpenFlow API）允许“编程”路由器</li><li>控制平面（control plane）的开放（非专有）实现</li></ul><blockquote><p><a href="https://www.ibm.com/topics/sdn" target="_blank" rel="noopener noreferrer">What is Software-Defined Networking? (ibm.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="what-is-sdn" tabindex="-1"><a class="header-anchor" href="#what-is-sdn" aria-hidden="true">#</a> What is SDN?</h3><p>SDN is an approach to networking that uses software controllers that can be driven by application programming interfaces (APIs) to communicate with hardware <a href="https://www.ibm.com/topics/infrastructure" target="_blank" rel="noopener noreferrer">infrastructure<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> to direct network traffic. Using software, it creates and operates a series of virtual overlay networks that work in conjunction with a physical underlay network. SDNs offer the potential to deliver application environments as code and minimize the hands-on time needed for managing the network. SDN 是一种网络方法，它使用可由应用程序编程接口 (API) 驱动的软件控制器与硬件基础设施通信以引导网络流量。它使用软件创建和运行一系列与物理底层网络协同工作的虚拟覆盖网络。 SDN 提供了将应用程序环境作为代码交付的潜力，并最大限度地减少了管理网络所需的动手时间。</p><h3 id="why-use-sdn" tabindex="-1"><a class="header-anchor" href="#why-use-sdn" aria-hidden="true">#</a> Why use SDN?</h3><p>Companies today are looking to SDN to bring the benefits of the cloud to network deployment and management. With network virtualization, organizations can open the door to greater efficiency through new tools and technology, such as Software-as-a-Service (SaaS), Infrastructure-as-a-Service (<a href="https://www.ibm.com/cloud/learn/iaas" target="_blank" rel="noopener noreferrer">IaaS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>) and other cloud computing services, as well as integrate via APIs with their software-defined network. 当今的公司希望通过 SDN 将云的优势带入网络部署和管理中。借助网络虚拟化，组织可以通过软件即服务 (SaaS)、基础设施即服务 (IaaS) 和其他云计算服务等新工具和技术打开提高效率的大门，以及通过 API 与其软件定义网络集成。</p><p>SDN also increases visibility and flexibility. In a traditional environment, a router or switch—whether in the cloud or physically in the data center—is only aware of the status of network devices next to it. SDN centralizes this information so that organizations can view and control the entire network and devices. Organizations can also segment different virtual networks within a single physical network or connect different physical networks to create a single virtual network, offering a high degree of flexibility. SDN 还提高了可见性和灵活性。在传统环境中，路由器或交换机——无论是在云端还是物理上在数据中心——只知道它旁边的网络设备的状态。 SDN 集中了这些信息，以便组织可以查看和控制整个网络和设备。组织还可以在单 ​​ 个物理网络内分割不同的虚拟网络，或连接不同的物理网络以创建单个虚拟网络，从而提供高度的灵活性。</p><p>Simply put, companies are using SDN because it’s a way to efficiently control traffic and scale as needed. 简而言之，公司正在使用 SDN，因为它是一种根据需要有效控制流量和扩展的方法。</p></blockquote><p>SDN 体系结构如下图所示：</p><p><img src="/assets/image-20230511182639115-2b5c4e71.png" alt="image-20230511182639115" loading="lazy"></p><p>SDN 体系结构具有四个关键特征：</p><ul><li>基于流的转发（Flow-based forwarding）；</li><li>数据平面与控制平面分离（Separation of data plane and control plane）；</li><li>网络控制功能（Network control functions）；</li><li>可编程网络（A programmable network）。</li></ul><h3 id="sdn-controller" tabindex="-1"><a class="header-anchor" href="#sdn-controller" aria-hidden="true">#</a> SDN Controller</h3><ul><li><p>maintain network state information 维护网络状态信息</p></li><li><p>interacts with network control applications(控制应用程序进行交互) “above” via northbound API</p></li><li><p>interacts with network switches(与网络交换机交互) “below” via southbound API</p></li><li><p>implemented as distributed system for performance, scalability, fault-tolerance, robustness 作为分布式系统实现，以实现性能、可扩展性、容错性和健壮性</p></li></ul><h3 id="openflow-protocol" tabindex="-1"><a class="header-anchor" href="#openflow-protocol" aria-hidden="true">#</a> OpenFlow protocol</h3><p>Operates between controller, switch, and TCP used to exchange messages 使用 TCP 交换消息</p><p>three classes of OpenFlow messages:</p><ul><li>controller-to-switch</li><li>asynchronous (switch to controller)</li><li>symmetric (misc)</li></ul><h3 id="onos-controller" tabindex="-1"><a class="header-anchor" href="#onos-controller" aria-hidden="true">#</a> ONOS controller</h3><blockquote><p><a href="https://www.redhat.com/en/topics/virtualization/what-is-nfv" target="_blank" rel="noopener noreferrer">What is NFV? (redhat.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="what-is-nfv" tabindex="-1"><a class="header-anchor" href="#what-is-nfv" aria-hidden="true">#</a> What is NFV?</h3><p>Network functions virtualization (网络功能虚拟化, NFV) is a way to <a href="https://www.redhat.com/en/topics/virtualization/what-is-virtualization" target="_blank" rel="noopener noreferrer">virtualize network services<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, such as routers, firewalls, and load balancers(路由器、防火墙和负载平衡器), that have traditionally been run on proprietary hardware(专有硬件上). These services are packaged as <a href="https://www.redhat.com/en/topics/virtualization/what-is-a-virtual-machine" target="_blank" rel="noopener noreferrer">virtual machines (VMs)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> on commodity hardware, which allows service providers to run their network on standard servers instead of proprietary ones. It is one of the primary components of a <a href="https://www.redhat.com/en/topics/cloud-computing/what-is-telco-cloud" target="_blank" rel="noopener noreferrer">telco cloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, which is reshaping the telecommunications industry. 这些服务被打包为商品硬件上的虚拟机 (VM)，这允许服务提供商在标准服务器而不是专有服务器上运行他们的网络。 它是电信云的主要组成部分之一，正在重塑电信行业。</p><p>With NFV, you don’t need to have dedicated hardware for each network function. NFV improves scalability and agility by allowing service providers to deliver new network services and applications on demand, without requiring additional hardware resources. 使用 NFV，您无需为每个网络功能配备专用硬件。 NFV 允许服务提供商按需提供新的网络服务和应用程序，而无需额外的硬件资源，从而提高了可扩展性和敏捷性。</p></blockquote><p>自己搭建一个 SDN：</p><ul><li>上层：Floodlight / Opendaylight</li><li>中间沟通：Openflow</li><li>下层：<a href="https://github.com/mininet/mininet" target="_blank" rel="noopener noreferrer">Mininet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><blockquote><p>Mininet 能实现在一台机器上模拟一个完整的主机、链路和交换机网络</p></blockquote><p><img src="/assets/image-20230518162306903-74795ea7.png" alt="image-20230518162306903" loading="lazy"></p><h2 id="icmp-the-internet-control-message-protocol" tabindex="-1"><a class="header-anchor" href="#icmp-the-internet-control-message-protocol" aria-hidden="true">#</a> ICMP: The Internet Control Message Protocol</h2><p><strong>因特网控制报文协议（the Internet Control Message Protocol，ICMP）</strong>，被主机和路由器用来彼此沟通网络层的信息。ICMP 最典型的用途是差错报告。</p><div class="custom-container tip"><p class="custom-container-title">TTL</p><p>TTL 指寻找路由器的跳数，如 TTL = 1 代表只有一跳。</p></div><h3 id="traceroute-and-icmp" tabindex="-1"><a class="header-anchor" href="#traceroute-and-icmp" aria-hidden="true">#</a> Traceroute and ICMP</h3><ul><li>source sends series of UDP segments to destination 源将一系列 UDP 段发送到目标</li><li>when datagram in <em>n</em>th set arrives to nth router 当第 n 个集中的数据报到达第 n 个路由器时</li><li>when ICMP message arrives, source records RTTs 当 ICMP 消息到达时，源记录 RTT</li></ul><blockquote><p><a href="https://github.com/A-BigTree/college_assignment/blob/main/learning_Notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md#56-icmp%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener noreferrer">college_assignment/计算机网络.md at main · A-BigTree/college_assignment · GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ICMP 报文类型如下图所示：</p><p><img src="/assets/image-20230219000618602-8c610062.png" alt="image-20230219000618602" loading="lazy"></p></blockquote><h2 id="network-management-and-snmp" tabindex="-1"><a class="header-anchor" href="#network-management-and-snmp" aria-hidden="true">#</a> Network management and SNMP</h2><p>网络管理包括了硬件、软件和人类元素的设置、整合和协调，以监视、测试、轮询、配置、分析、评价和控制网络及网元资源，用合理的成本满足实时性、运营性能和服务质量的要求。Network management includes the deployment, integration, and coordination of the hardware, software, and human elements to monitor, test, poll, configure, analyze, evaluate, and control the network and element resources to meet the real-time, operational performance, and Quality of Service requirements at a reasonable cost.</p><h3 id="infrastructure-for-network-management" tabindex="-1"><a class="header-anchor" href="#infrastructure-for-network-management" aria-hidden="true">#</a> Infrastructure for network management</h3><p>网络管理框架。网络管理的关键组件如下图所示：</p><p><img src="/assets/image-20230518163122463-7a28ebcc.png" alt="image-20230518163122463" loading="lazy"></p><blockquote><p><a href="https://www.cisco.com/c/en/us/solutions/enterprise-networks/what-is-network-management.html" target="_blank" rel="noopener noreferrer">What Is Network Management? - Cisco<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="what-is-network-management" tabindex="-1"><a class="header-anchor" href="#what-is-network-management" aria-hidden="true">#</a> What Is Network Management?</h3><p>Network management refers to two related concepts. First is the process of configuring, monitoring, and managing the performance of a network. Second is the platform that IT and NetOps teams use to complete these ongoing tasks. 网络管理指的是两个相关的概念。首先是配置、监控和管理网络性能的过程。其次是 IT 和网络运作团队用来完成这些正在进行的任务的平台。</p></blockquote><ul><li><strong>管理服务器（managing server）</strong>：一个应用程序，通常有人参与，并运行在网络运营中心（NOC）的集中式网络管理工作站上，执行网络管理活动的地方，控制网络管理信息的收集、处理、分析和显示；</li><li><strong>被管设备（managed device）</strong>：被管对象（managed object）是被管设备中硬件的实际部分和用于这些硬件及软件组件的配置参数；</li><li><strong>信息管理库（Management Information Base，MIB）</strong>：收集被管设备中每个被管对象的关联信息，信息值可供管理服务器所用；</li><li><strong>网路管理代理（network management agent）</strong>：运行在被管设备中的一个进程，该进程与管理服务器通信，在管理服务器的命令和控制下在被管设备中采取本地动作；</li><li><strong>网络管理协议（network management protocol）</strong>：运行在管理服务器和被管设备之间，允许管理服务器查询被管设备的状态，并经过其代理间接地在这些设备上采取行动。</li></ul><h3 id="snmp-protocol-message-types" tabindex="-1"><a class="header-anchor" href="#snmp-protocol-message-types" aria-hidden="true">#</a> SNMP protocol: message types</h3><p>即通讯原语。</p><p>**简单网络管理协议（Simple Network Management Protocol，SNMP）**是一个应用层协议，用于在管理服务器和代表管理服务器执行的代理之间传递网络管理控制和信息报文。</p><p>SNMPv2 定义了 7 种类型报文，这些报文一般称为协议数据单元（PDU），PDU 格式如下图所示：</p><p><img src="/assets/image-20230518170106475-1dcd41d3.png" alt="image-20230518170106475" loading="lazy"></p><h3 id="snmp-protocol-message-formats" tabindex="-1"><a class="header-anchor" href="#snmp-protocol-message-formats" aria-hidden="true">#</a> SNMP protocol: message formats</h3><p><img src="/assets/image-20230518170129633-0f629094.png" alt="image-20230518170129633" loading="lazy"></p><p>发送接收都是上半这样的格式。下半是 Trap。</p><p>其中 PDU 是 Protocol Data Unit，合起来叫做 “简单网络管理协议数据单元”。</p><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary" aria-hidden="true">#</a> Summary</h2><ul><li>approaches to network control plane <ul><li>per-router control (traditional)</li><li>logically centralized control (software defined networking)</li></ul></li><li>traditional routing algorithms <ul><li>implementation in Internet: OSPF, BGP</li></ul></li><li>SDN controllers <ul><li>implementation in practice: ODL, ONOS</li></ul></li><li>Internet Control Message Protocol</li><li>network management</li></ul><p>第五章主要讲了路由表怎么做出来的，展示了网络链路上怎么指路标。最新的 “指路标” 技术是 SDN。</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/cworld1/cn-learning/edit/main/05-network-layer-2.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: cworld0@qq.com">cworld1</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/04-network-layer.html" class="" aria-label="Chapter 4: Network Layer (The Data Plane)"><!--[--><!--]--> Chapter 4: Network Layer (The Data Plane) <!--[--><!--]--></a></span><span class="next"><a href="/06-link-layer-and-lans.html" class="" aria-label="Chapter 6: The Link Layer and LANs"><!--[--><!--]--> Chapter 6: The Link Layer and LANs <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><p class="my-footer" style="text-align:center;"> ©2023 • <a href="https://cworld.top/">CWorld</a> • 总访问 <span id="busuanzi_value_site_pv"></span> 次 </p><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-6fefc517.js" defer></script>
  </body>
</html>
